(()=>{"use strict";var e,t={323:()=>{function e(e,t,r,i,s,o,n,c){var l,a="function"==typeof e?e.options:e;if(t&&(a.render=t,a.staticRenderFns=r,a._compiled=!0),i&&(a.functional=!0),o&&(a._scopeId="data-v-"+o),n?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),s&&s.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(n)},a._ssrRegister=l):s&&(l=c?function(){s.call(this,(a.functional?this.parent:this).$root.$options.shadowRoot)}:s),l)if(a.functional){a._injectStyles=l;var d=a.render;a.render=function(e,t){return l.call(t),d(e,t)}}else{var u=a.beforeCreate;a.beforeCreate=u?[].concat(u,l):[l]}return{exports:e,options:a}}const t=e({name:"file-uploader-directory",props:{path:{type:String,required:!0},directory:{type:Object,required:!0},root:{type:Boolean,default:!1}},data:function(){return{}},computed:{classObject:function(){return{selected:this.directory.selected,root:this.root}},hasItems:function(){return this.directory.files.length>0||Object.keys(this.directory.directories).length>0}},methods:{emitSelect:function(e){this.$emit("select",e)},emitUnselect:function(e){this.$emit("unselect",e)},handleClick:function(){this.directory.selected?this.emitUnselect(this.directory):this.emitSelect(this.directory)}}},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"storage-file-uploader-directory",class:e.classObject},[e.root?e._e():r("div",{staticClass:"storage-file-uploader-directory-name",on:{click:e.handleClick}},[r("i",{staticClass:"fa fa-folder"}),e._v(" "),r("span",{domProps:{textContent:e._s(e.path)}})]),e._v(" "),e.hasItems?r("ul",{staticClass:"storage-file-uploader-directory-list"},[e._l(e.directory.directories,(function(t,i){return r("li",[r("file-uploader-directory",{attrs:{path:i,directory:t},on:{select:e.emitSelect,unselect:e.emitUnselect}})],1)})),e._v(" "),e._l(e.directory.files,(function(t){return r("li",{staticClass:"storage-file-uploader-file"},[r("i",{staticClass:"fa fa-file"}),e._v(" "),r("span",{domProps:{textContent:e._s(t.name)}})])}))],2):e._e()])}),[],!1,null,null,null).exports;var r=e({props:{accept:{type:String,default:""}},components:{directory:t},data:function(){return{rootDirectory:{name,directories:{},files:[],selected:!1},selectedDirectory:null}},computed:{hasSelectedDirectory:function(){return null!==this.selectedDirectory},selectedDirectoryName:function(){return this.selectedDirectory.name},hasItems:function(){return this.rootDirectory.files.length>0||Object.keys(this.rootDirectory.directories).length>0},hasNoFiles:function(){return!0}},methods:{handleFilesChosen:function(e){var t=e.target.files,r=this.rootDirectory.files,i=0;this.hasSelectedDirectory&&(r=this.selectedDirectory.files);var s=[];for(i=0;i<t.length;i++)s.push(t[i].name);for(i=r.length;i--;)s.includes(r[i].name)&&r.splice(i,1);for(i=0;i<t.length;i++)r.push(t[i])},handleNewDirectory:function(e){var t=this.rootDirectory.directories;this.hasSelectedDirectory&&(t=this.selectedDirectory.directories),e.split("/").forEach((function(e){t.hasOwnProperty(e)||Vue.set(t,e,{name:e,directories:{},files:[],selected:!1}),t=t[e].directories}))},addDirectory:function(){var e=prompt("Please enter the new directory name");e&&this.handleNewDirectory(e)},addFiles:function(){this.$refs.fileInput.click()},selectDirectory:function(e){this.hasSelectedDirectory&&(this.selectedDirectory.selected=!1),this.selectedDirectory=e,this.selectedDirectory.selected=!0},unselectDirectory:function(){this.hasSelectedDirectory&&(this.selectedDirectory.selected=!1,this.selectedDirectory=null)}},mounted:function(){}},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"storage-file-uploader"},[r("input",{ref:"fileInput",staticClass:"hidden",attrs:{type:"file",multiple:"",accept:e.accept},on:{input:e.handleFilesChosen}}),e._v(" "),r("div",{staticClass:"storage-file-uploader-buttons"},[r("button",{staticClass:"btn btn-default",on:{click:e.addFiles}},[r("i",{staticClass:"fa fa-file"}),e._v(" Add files\n        ")]),e._v(" "),r("button",{staticClass:"btn btn-default",on:{click:e.addDirectory}},[r("i",{staticClass:"fa fa-folder"}),e._v(" Add directory\n        ")]),e._v(" "),r("button",{staticClass:"btn btn-success pull-right",attrs:{disabled:e.hasNoFiles}},[r("i",{staticClass:"fa fa-upload"}),e._v(" Submit\n        ")])]),e._v(" "),e.hasSelectedDirectory?r("p",{staticClass:"text-muted"},[e._v("\n        New files and directories will be added to the selected directory "),r("span",{domProps:{textContent:e._s(e.selectedDirectoryName)}}),e._v(".\n    ")]):r("p",{staticClass:"text-muted"},[e._v("\n        New files and directories will be added to the top-level directory.\n    ")]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.hasItems,expression:"hasItems"}],staticClass:"panel panel-default"},[r("directory",{attrs:{path:"/",directory:e.rootDirectory,root:!0},on:{select:e.selectDirectory,unselect:e.unselectDirectory}})],1)])}),[],!1,null,null,null);const i=e({components:{fileUploader:r.exports},data:function(){return{}},methods:{},created:function(){}},undefined,undefined,!1,null,null,null).exports;biigle.$mount("create-storage-request-container",i)},401:()=>{}},r={};function i(e){var s=r[e];if(void 0!==s)return s.exports;var o=r[e]={exports:{}};return t[e](o,o.exports,i),o.exports}i.m=t,e=[],i.O=(t,r,s,o)=>{if(!r){var n=1/0;for(d=0;d<e.length;d++){for(var[r,s,o]=e[d],c=!0,l=0;l<r.length;l++)(!1&o||n>=o)&&Object.keys(i.O).every((e=>i.O[e](r[l])))?r.splice(l--,1):(c=!1,o<n&&(n=o));if(c){e.splice(d--,1);var a=s();void 0!==a&&(t=a)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[r,s,o]},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={355:0,392:0};i.O.j=t=>0===e[t];var t=(t,r)=>{var s,o,[n,c,l]=r,a=0;if(n.some((t=>0!==e[t]))){for(s in c)i.o(c,s)&&(i.m[s]=c[s]);if(l)var d=l(i)}for(t&&t(r);a<n.length;a++)o=n[a],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(d)},r=self.webpackChunkbiigle_user_storage=self.webpackChunkbiigle_user_storage||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),i.O(void 0,[392],(()=>i(323)));var s=i.O(void 0,[392],(()=>i(401)));s=i.O(s)})();
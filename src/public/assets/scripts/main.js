(()=>{"use strict";var e,t={442:()=>{function e(e,t,i,r,s,o,l,n){var c,a="function"==typeof e?e.options:e;if(t&&(a.render=t,a.staticRenderFns=i,a._compiled=!0),r&&(a.functional=!0),o&&(a._scopeId="data-v-"+o),l?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),s&&s.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(l)},a._ssrRegister=c):s&&(c=n?function(){s.call(this,(a.functional?this.parent:this).$root.$options.shadowRoot)}:s),c)if(a.functional){a._injectStyles=c;var d=a.render;a.render=function(e,t){return c.call(t),d(e,t)}}else{var u=a.beforeCreate;a.beforeCreate=u?[].concat(u,c):[c]}return{exports:e,options:a}}const t=e({name:"file-uploader-directory",props:{path:{type:String,required:!0},directory:{type:Object,required:!0},root:{type:Boolean,default:!1},removable:{type:Boolean,default:!1}},data:function(){return{collapsed:!1}},computed:{classObject:function(){return{selected:this.directory.selected,root:this.root}},hasItems:function(){return this.directory.files.length>0||Object.keys(this.directory.directories).length>0}},methods:{emitSelect:function(e){this.$emit("select",e)},emitUnselect:function(e){this.$emit("unselect",e)},handleClick:function(){this.directory.selected?this.emitUnselect(this.directory):this.emitSelect(this.directory)},emitRemoveDirectory:function(e,t){t=t?this.root?"/".concat(t):"".concat(this.path,"/").concat(t):this.path,this.$emit("remove-directory",e,t)},handleRemoveDirectory:function(){this.emitRemoveDirectory(this.directory)},emitRemoveFile:function(e,t){t=t?this.root?"/".concat(t):"".concat(this.path,"/").concat(t):this.path,this.$emit("remove-file",e,t)},handleRemoveFile:function(e){this.removable&&this.emitRemoveFile(e)},handleCollapse:function(){this.collapsed=!0},handleUncollapse:function(){this.collapsed=!1}},watch:{hasItems:function(e){e||(this.collapsed=!1)}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"storage-file-uploader-directory",class:e.classObject},[e.root?e._e():i("div",{staticClass:"storage-file-uploader-directory-name clearfix",on:{click:e.handleClick}},[e.collapsed?i("i",{staticClass:"fa fa-angle-right fa-fw",attrs:{title:"Expand this directory"},on:{click:function(t){return t.stopPropagation(),e.handleUncollapse.apply(null,arguments)}}}):i("i",{staticClass:"fa fa-angle-down fa-fw",attrs:{title:"Collapse this directory"},on:{click:function(t){return t.stopPropagation(),e.handleCollapse.apply(null,arguments)}}}),e._v(" "),i("i",{staticClass:"fa fa-folder"}),e._v(" "),i("span",{domProps:{textContent:e._s(e.path)}}),e._v(" "),e.removable?i("button",{staticClass:"btn btn-default btn-xs pull-right",attrs:{title:"Remove the directory"},on:{click:function(t){return t.stopPropagation(),e.handleRemoveDirectory.apply(null,arguments)}}},[i("i",{staticClass:"fa fa-trash"})]):e._e()]),e._v(" "),i("ul",{directives:[{name:"show",rawName:"v-show",value:!e.collapsed,expression:"!collapsed"}],staticClass:"storage-file-uploader-directory-list"},[e._l(e.directory.directories,(function(t,r){return i("li",[i("file-uploader-directory",{attrs:{path:r,directory:t,removable:e.removable},on:{select:e.emitSelect,unselect:e.emitUnselect,"remove-directory":e.emitRemoveDirectory,"remove-file":e.emitRemoveFile}})],1)})),e._v(" "),e._l(e.directory.files,(function(t){return i("li",{staticClass:"storage-file-uploader-file clearfix"},[i("i",{staticClass:"fa fa-file"}),e._v(" "),i("span",{domProps:{textContent:e._s(t.name)}}),e._v(" "),i("button",{staticClass:"btn btn-default btn-xs pull-right",attrs:{title:"Remove the file"},on:{click:function(i){return i.stopPropagation(),e.handleRemoveFile(t)}}},[i("i",{staticClass:"fa fa-trash"})])])})),e._v(" "),e.hasItems?e._e():i("li",{staticClass:"storage-file-uploader-file text-muted",attrs:{title:"This directory is empty"}},[e._v("\n            (empty)\n        ")])],2)])}),[],!1,null,null,null).exports;var i=e({props:{accept:{type:String,default:""}},components:{directory:t},data:function(){return{rootDirectory:{name,directories:{},files:[],selected:!1},selectedDirectory:null,editable:!0}},computed:{hasSelectedDirectory:function(){return null!==this.selectedDirectory},selectedDirectoryName:function(){return this.selectedDirectory.name},hasItems:function(){return Object.keys(this.rootDirectory.directories).length>0},hasNoFiles:function(){return!0}},methods:{handleFilesChosen:function(e){if(this.hasSelectedDirectory){var t=e.target.files,i=this.selectedDirectory.files,r=0,s=[];for(r=0;r<t.length;r++)s.push(t[r].name);for(r=i.length;r--;)s.includes(i[r].name)&&i.splice(r,1);for(r=0;r<t.length;r++)i.push(t[r])}},handleNewDirectory:function(e){var t,i=this.rootDirectory.directories;this.hasSelectedDirectory&&(i=this.selectedDirectory.directories,this.selectedDirectory.selected=!1),e.split("/").forEach((function(e){i.hasOwnProperty(e)||(t=Vue.set(i,e,{name:e,directories:{},files:[],selected:!1})),i=i[e].directories})),t.selected=!0,this.selectedDirectory=t},addDirectory:function(){var e=prompt("Please enter the new directory name");e&&this.handleNewDirectory(e)},addFiles:function(){this.$refs.fileInput.click()},selectDirectory:function(e){this.hasSelectedDirectory&&(this.selectedDirectory.selected=!1),this.selectedDirectory=e,this.selectedDirectory.selected=!0},unselectDirectory:function(){this.hasSelectedDirectory&&(this.selectedDirectory.selected=!1,this.selectedDirectory=null)},removeDirectory:function(e,t){var i=this.rootDirectory.directories;t.split("/").slice(1,-1).forEach((function(e){i=i[e].directories})),Vue.delete(i,e.name),e.selected&&(this.selectedDirectory=null)},removeFile:function(e,t){var i=this.rootDirectory;t.split("/").slice(1).forEach((function(e){i=i.directories[e]}));var r=i.files,s=r.indexOf(e);-1!==s&&r.splice(s,1)}},mounted:function(){}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"storage-file-uploader"},[i("input",{ref:"fileInput",staticClass:"hidden",attrs:{type:"file",multiple:"",accept:e.accept},on:{input:e.handleFilesChosen}}),e._v(" "),i("div",{staticClass:"storage-file-uploader-buttons"},[i("button",{staticClass:"btn btn-default",attrs:{title:"Add a new directory"},on:{click:e.addDirectory}},[i("i",{staticClass:"fa fa-folder"}),e._v(" Add directory\n        ")]),e._v(" "),e.hasSelectedDirectory?i("button",{staticClass:"btn btn-default",attrs:{title:"Add new files"},on:{click:e.addFiles}},[i("i",{staticClass:"fa fa-file"}),e._v(" Add files\n        ")]):i("button",{staticClass:"btn btn-default",attrs:{title:"Please create or select a directory to add files to",disabled:""}},[i("i",{staticClass:"fa fa-file"}),e._v(" Add files\n        ")]),e._v(" "),i("button",{staticClass:"btn btn-success pull-right",attrs:{disabled:e.hasNoFiles}},[i("i",{staticClass:"fa fa-upload"}),e._v(" Submit\n        ")])]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.hasItems,expression:"hasItems"}],staticClass:"panel panel-default"},[i("directory",{attrs:{path:"/",directory:e.rootDirectory,root:!0,removable:e.editable},on:{select:e.selectDirectory,unselect:e.unselectDirectory,"remove-directory":e.removeDirectory,"remove-file":e.removeFile}})],1)])}),[],!1,null,null,null);const r=e({components:{fileUploader:i.exports},data:function(){return{}},methods:{},created:function(){}},undefined,undefined,!1,null,null,null).exports;biigle.$mount("create-storage-request-container",r)},401:()=>{}},i={};function r(e){var s=i[e];if(void 0!==s)return s.exports;var o=i[e]={exports:{}};return t[e](o,o.exports,r),o.exports}r.m=t,e=[],r.O=(t,i,s,o)=>{if(!i){var l=1/0;for(d=0;d<e.length;d++){for(var[i,s,o]=e[d],n=!0,c=0;c<i.length;c++)(!1&o||l>=o)&&Object.keys(r.O).every((e=>r.O[e](i[c])))?i.splice(c--,1):(n=!1,o<l&&(l=o));if(n){e.splice(d--,1);var a=s();void 0!==a&&(t=a)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[i,s,o]},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={355:0,392:0};r.O.j=t=>0===e[t];var t=(t,i)=>{var s,o,[l,n,c]=i,a=0;if(l.some((t=>0!==e[t]))){for(s in n)r.o(n,s)&&(r.m[s]=n[s]);if(c)var d=c(r)}for(t&&t(i);a<l.length;a++)o=l[a],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(d)},i=self.webpackChunkbiigle_user_storage=self.webpackChunkbiigle_user_storage||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),r.O(void 0,[392],(()=>r(442)));var s=r.O(void 0,[392],(()=>r(401)));s=r.O(s)})();